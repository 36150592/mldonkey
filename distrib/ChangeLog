The release mechanism was changed in a way that minor updates like
this one will not get a release tag in CVS, also the version
number reported by MLDonkey will stay the same.

All numbers mentioned here can be found as patches on
http://savannah.nongnu.org/patch/?group=mldonkey

ChangeLog
=========

To compile MLDonkey on MinGW Ocaml 3.08.4 needs to be compiled with this patch:
http://pauillac.inria.fr/bin/caml-bugs/incoming?id=3789;page=1;user=guest

2005/09/18: spiralvoice

4419: EDK: Support secure user identification (crypto5, by zet)

2005/09/17: spiralvoice

4424: OV: discard peers with ip 1.0.0.0 and random port
4425: EDK: Support server extended getsources2 opcode (zet)
4429: Better error message if MLDonkey lacks network support
      for a file in files.ini
4427: BT: 10 retries / follow 10 redirections in 
      dllink http://server/file.torrent
4423: OV/KAD: Save only active peers to config files/ save max 200 peers
      (bogeyman)

2005/09/14: spiralvoice

4420: Remove obsoleted commonSwarming1 code
4418: Re-activate sources_per_chunk option (pango)
4417: BT: Improve BT upload speed (pango)
4374: fix "max_hard_download_rate has to be doubled" (pango)
      This patch changes internal code, no option has to be changed

2005/09/13: spiralvoice

4406: Improved Unicode filename support (CML)
4412: OV: Handle OvernetPeerNotFound correctly (bogeyman)
4411: OV/KAD: Some peers are not added to known_peers (bogeyman)
4410: Shorter filesystem name for XFS
4409: Compile fix if Bzip2 is not available
4408: OpenBSD: configure.in fix to find libbz2 and others in /usr/local

2005/09/08: spiralvoice

4397: Buildinfo: Run-time check for Windows OS version / Unix uname (zet)
4403: html_mods: mem_stats in a single readable table (zet)
4402: BT: BT-user_agent option (zet)

2005/09/06: spiralvoice

4268: Web/Gui: free core's buffer allocated by vd # and gui (bogeyman)
4393: Lower ip blocking memory usage (pango)
      new option ip_blocking_descriptions true|false
4401: BT: Send 'stopped' event to all trackers when exiting (zet)
---------------------------------------------------------------------
2005/09/04: spiralvoice (version 2.6.4 = tag release-2-6-4)

4392: Print "Core started" on stdout even if logging is enabled
      Fixes problems when MLDonkey is spawned by a GUI

2005/09/03: spiralvoice

4247: memstats: BT/FT/GNUT/G2: initial memstats, ALL: show nr of old_files,
      BT: nr of torrent files
4390: Mail: Print incoming path if !!url_in_mail is used
4389: BT: Fix core exit if dirs of a shared multifile torrent are not writable
4368: new option: create_file_sparse true|false, this works only for
      files on NTFS drives in MinGW compiled MLDonkey (thanks to zet)

2005/09/01: spiralvoice

4385: EDK: Preserve untested servers (pango)
4351: optimize ip blocking lists (pango)
4376: EDK: Re-enable result_done (already downloaded) in search results (zet)
4126: Improved log_file handling

* there is now a default log_file: mlnet.log, old downloads.ini is *not* updated
* its default log_file_size is 2MB, this is checked only on core start,
  if log_file is bigger it will be resetted
* logging will always be appended to log_file
* new command "clear_log" to reset log_file while the core is working
* new command "open_log" to reopen log after close_log
* removed command "log_file", same can be achieved through "set log_file <file>"

4384: HTML: Add "Import Serverlist" in servers,clean third button row (schlumpf)
4365: Disable console "X" close button on MinGW, second version (CML)
4382: Solve libgd configure in mandrake 10.0
4381: better differentiation of eDonkey and BT Stats Table (schlumpf)
4380: some info for SCM Version (CVS co Date/ SVN revision) (schlumpf)
4379: Fix compile error when libgd is not present
4378: Longhelp: Better description for add_user
4377: Better description for shared_directories in downloads.ini
4356: EDK: Improved server.met handling / fix contact.dat loading

* Changed user agent from "MLdonkey" to "MLDonkey", solves problem
  when downloading files from www.gruk.org and www.srv1000.com
* MLDonkey new recognizes links like ed2k://|serverlist|http://server/file.ext|/
* "servers" command now takes URLs
* if period in web_infos is zero the file is only loaded during core start
  (as requested by the owner of www.gruk.org)
* in all places where a filename or URL for a server.met can be used this
  file can also be compressed with gz/bz2/zip
* automatically replace old default server.met in web_infos
("server.met", 24, 
"http://ocbmaurice.dyndns.org/pl/slist.pl/server.met?download/server-best.met");
  with fake servers free list from gruk.org:
        ("server.met", 0, "http://www.gruk.org/server.met.gz");
* fixed bug which prevented loading Overnet contact.dat file in web_infos

2005/08/29: spiralvoice

4368: Use sparse files on MinGW/NTFS (zet)
4370: BT/Win32: fix multifile hashing (Amorphous)

2005/08/28: spiralvoice

4366: HTML: more maintainable html_mods styles (pango)
4367: Improve logging
4361: New command: uptime

Lots of improvements for MinGW, this platform now supports
files > 2GB, threads and libgd generated statistics.
Here you will find compilation instructions:
http://mldonkey.berlios.de/modules.php?name=Wiki&pagename=Windows

4342: Large_file support for mld_hash and MinGW MLDonkey core (zet)
4358: Add thread support for MinGW (zet)
4362: configure.in support for libgd on MinGW/FreeBSD
4349: increase filedescriptor limit for mingw (zet)
4365: Disable console "X" close button on MinGW (zet)

2005/08/26: spiralvoice

4360: Configure: Test for nl_langinfo(CODESET)
4359: Upload: Give upload slot truely randomly (pango)
4347: Improve exit codes, codes were inspired by sysexits.h
4345: Code clean: Optimize redundant time_to_string functions
4357: Rename ed2k_hash to mld_hash
4344: Improve ./configure checks (bzlib.h, iconv on Windows)
---------------------------------------------------------------------
2005/08/21: spiralvoice (version 2.6.3 = tag release-2-6-3)

4254: Patch reverted, did not work
      "html_mods: Table data is incorrectly centered"
4336: Improve some log file messages
4321: BT: fixed "make_torrent produce corrupted files on Windows" (beedauchon)
4335: Buildinfo: Fix bug if Bzip2 version string is empty (beedauchon)
4329: HTTPClient: Implement retries for failed requests
4319: Fix compile if libbz2 is not available,
      new configure option: --disable-bzip2
4334: BT/FileTP: Some progress on cancel bug (kempston)
4333: send ip blocked addr state to gui, compute_torrent from gui (zet)
4332: Let configure fail if GNU make is not installed

2005/08/18: spiralvoice

4323: HTML: Search results: new colums for Bitrate, Codec and length
4324: Log: Improve output for verbosity "hid"
4322: EDK: compatibleclient 40 -> Shareaza
4320: Fix compile on FreeBSD < 5.3

2005/08/15: spiralvoice

4317: Updated ./configure for compiling lablgtk2 with --enable-batch
4316: Updated ./distrib/Install.txt for Ocaml 3.08.4 and new GUI options
4292: html_mods: Match styles default frameHeight with the common default
4314: Allow compiling with Ocaml 3.08.4
      Compiling with 3.08.3 still works
4312: BT: Allow seeding (beedauchon)
4311: BT: create_torrent: default_tracker and default_comment (beedauchon)
4309: GUI: send ed2k/bt network u/d totals (zet)
4308: Gnutella/G2: Fix commit if no TigerTree is available
4305: buildinfo: Print some system internals
4304: EDK: Fix disconnect state with verbosity = "hid"
4297: Create ini file backups on shutdown
Note: file_sources.ini is never saved, it makes no sense to keep this file.

New options:

* backup_options_format, default "tar.gz", "zip" can also be used

* backup_options_delay, default 0
How often (in hours) should a backup of the ini files be written into old_config.
A value of zero means that a backup is written only when the core shuts down.

* backup_options_generations, default 10
Define the total number of options archives in old_config.

Command save got two new parameters:
* "save all" saves options, sources and creates a ini file backup
* "save backup" speaks for itself;-)
---------------------------------------------------------------------
2005/08/11: spiralvoice (version 2.6.2 = tag release-2-6-2)

4296: BT: Fix options parsing
---------------------------------------------------------------------
2005/08/09: spiralvoice (version 2.6.1 = tag release-2-6-1)

4291: EDK: Better logging for unknown compatibleclient values
4290: BT: Some small fixes for messages interested and cancel (beedauchon)
4289: LOG: Improve verbosity "hid"
4287: Better clear Fifo buffers (bogeyman)
4268: Web/Gui: free core's buffer allocated by vd # and gui (bogeyman)

2005/08/08: spiralvoice

4285: IPBlock: Server support
* display in vm/vma if a server has a blocked IP
* prevent connections to a IP blocked server,
  in EDK case this resulted in a LowID connection 

4284: Remove whitespaces / Some logging changes

2005/08/07: spiralvoice

4279: MinGW: HDD statistics support
4281: Remove white spaces / Some logging stuff
4251: HTML: few fixes / new option html_frame_border true|false
4278: Windows: Fix bug creating work dirs in empty dir

2005/08/06: spiralvoice

4276: IPBlock: Never block local IPs even if they are in blocklist
4274: Use relative path if downloads.ini is present

2005/08/05: spiralvoice

4272: HTML: Cursor focus in input field
4271: GTK2: Fix compile bug in src/gtk2/chat/chat_art.ml
4155: Let MLDonkey create its data in $HOME/.mldonkey

Usage instructions:
* if the core is started in a directory where downloads.ini exists
  this directory will be used, this is the same behaviour as before
* on Windows the current directory will always be used,
  this is consistent with eMule
* on other systems $HOME/.mldonkey will be created and used,
  this is consistent with eDonkey, aMule and Unix standards
* if variable MLDONKEY_DIR is used that directory has priority,
  to simulate the behaviour without this patch use:
    export MLDONKEY_DIR="." && ./mlnet

2005/08/04: spiralvoice

4270: Overnet: Convert local IPs sent by OV clients to real IPs
4269: IPBlock: Several fixes, better zip file support
4264: Fasttrack: Force commit of all complete files

4258: BT: Statistics, recognize more clients, min_interval,
      torrents/old and more...
      This patch was done by Beedauchon, it incorporates weeks of work from him.
* move .torrent to torrents/old if the file is not shared anymore
* new command rm_old_torrents: delete all files in torrents/old
* eDonkey like statistics for BT clients (csbt command)
* compute_torrent and make_torrent can put a comment into the .torrent file
* MLdonkey computes a BT-compatible client_uid starting with "-ML"
* parse more fields from .torrent files and display them in HTML interface
* Tracker: replace "/tracker" by "/announce"
* Tracker: add "/scrape"
* Multitracker support for downloading

2005/08/02: spiralvoice

4263: Fasttrack: Force bootstrapping nodes

2005/08/01: spiralvoice

4261: HTML: Add DL button - opens dialog for entering links (omgwtf2)
4260: IPblock: Enable IP blocking for Overnet and HTTP server
      (=BT Tracker) (beedauchon)
4257: Kick uploaders which send no data for more than 1 minute
4256: Print message if glibc version mismatch
      updates for buildinfo (version of libbz2, libz, libpng)

2005/07/29: spiralvoice

4255: HTML: updates for cs command
4254: html_mods: Table data is incorrectly centered
4253: HTML: New style Construction (omgwtf2)
4251: few html fixes (reverted) (beedauchon)

2005/07/28: spiralvoice

4250: Remove whitespaces from commonUploads.ml
4249: HTML: Links to fake check services in search results (bogeyman)

2005/07/27: spiralvoice

4194: FileTP : Add support for "referer", error messages cleanup (beedauchon)
4245: BT: Remove whitespace (beedauchon)
4244: Change web_infos period to hours (this is a bugfix,
      no need to change ini files)
      new option: enable_mlnet_redirector

2005/07/26: spiralvoice

4243: FileTP: Clean lots of whitespaces
4031: HTML: relative refs in HTML output (beedauchon)
4191: Access to disk data (free space, max file name length)
      This is first step implmenting this, checkout the
      disk command for debugging.
4242: IPBlock: Support guarding_full.zip
4241: Fix html_mods_vd_gfx_remove
4240: EDK: New option keep_downloaded_in_old_files

2005/07/23: spiralvoice

4184: support guarding.p2p in zip/gz/bz2 format
      bz2 segfaults on OpenBSD, therefore disabled
      see notes in the patch on how to compile with MinGW

2005/07/22: spiralvoice

4205: Improve logging with timestamps 2 (incomplete)
4204: Improve logging with timestamps (incomplete)

2005/07/21: spiralvoice

4195: GUI: Change configure options

Now "./configure" compiles no GUI, "--disable-gui" is default.
To use a GUI use "--enable-gui", this enables GTK2 GUI.
Other options are:
--enable-gui=newgui2 (use GTK2 GUI)
--enable-gui=newgui1 (use GTK1 newgui)
--enable-gui=oldgui  (use GTK1 oldgui)
Options like "--disable-newgui" or "--enable-gtk2" were removed.

2005/07/20: spiralvoice

4193: CommonGraphics : some whitespace cleanups
4190: Gdstats: Fix tag.png/jpg link output
4188: Overnet: Dont put our own ID in the buckets (bogeyman)
---------------------------------------------------------------------
2005/07/19: spiralvoice (version 2.6.0 = tag release-2-6-0)

4175: New option html_mods_use_js_tooltips, default true
      (4175_5.patch)
4187: Update version to 2.6.0
4186: SCM date for Windows / FreeBSD configure enhancement

2005/07/18: spiralvoice

4183: HTML: Overnet/Kademlia stats improvements (beedauchon)
4118: Solve memory leak in Overnet/Kademlia
4182: Get CVS date in configure for OpenBSD
4175: HTML: Add Multiline File Information in download table
      (4175_4.patch)

2005/07/17: spiralvoice

4181: EDK: Control identified versions
4180: EDK: Files copied to incoming dir for sharing do not
      appear in upstats after hashing
4179: Get CVS date in configure for FreeBSD & Mac OS X
4178: Dont build GUI on "make release.mlnet.static"
4177: Clear logging, first steps toward time stamps
4175: HTML: Add Multiline File Information in search results
4174: EDK: Re-enable source exchange with eMule clients
4163: EDK: Avoid saving sources every save_options_delay

2005/07/14: spiralvoice

4173: Clear whitespace from code
4168: HTML: Graphical chunk display in vd <num> (beedauchon)
4167: Gdstats: Fix corrupted pics output/improved output (beedauchon)

2005/07/13: spiralvoice

Remove obsolete ./src/gtk/gui2 directory
4165: Clean log file
4164: Gnutella/G2: Update Webcache URLs
4160: resize properly the names in the gtk2 gui (su_blanc)
4158: EDK: Parse and display version numbers, also in GTK2 GUI (su_blanc)
4114: EDK: new command "reset_stats" (Knocker)

2005/07/10: spiralvoice

4159: Removed whitespaces (beedauchon)
4156: tray icon in x11 for GTK2 GUI (su_blanc)
4157: fix mlnet.pid checking at start up for GUI

2005/07/07: spiralvoice

4153: More infos for mem_stats
4146: Use lprintf_nl instead of "lprint_newline ()" or "\n" (beedauchon)

2005/07/06: spiralvoice

4118: Improve Overnet/Kademlia logging and mem_stats output
      (overnet_log,patch)
---------------------------------------------------------------------
2005/07/05: spiralvoice (version 2.5.30.17 = tag release-2-5-30-17)

4142: Remove unneeded code
4141: Cleaned logging
4140: New option: create_dir_mask
      New directories in incoming_directories are created
      with these rights. 
4139: EDK: don't ask clients for non-downloading files

2005/07/04: spiralvoice

patch posted in bug 13619:
  Always returns ASCII(C) locale when it use libcharset

2005/06/29: spiralvoice

4135: Change emule_version
4134: Clean core startup messages and log output
4130: Print warning message for Windows users
4128: Notification mail: show hash and download time
4127: Add TOS support
4123: First steps toward integrated user-management:
      new commands "remove_user" and "users",
      only "admin" is allowed to kill the core
      HTML interface to setup users (Options, Users)

2005/06/25: spiralvoice

4125: Some configure.in fixes if libpng is misssing in libgd

2005/06/23: spiralvoice

4122: EDK: "server <met>" command now responds with a clearer answer (Knocker)
4121: EDK: Dont remove prefered server if server_users < min_users_on_server
      (Knocker)
4120: EDK: send emule_version to servers (Knocker)
4083: new build target: release.mlnet.distri
      it contains both the dynamic and the static linked core

2005/06/22: spiralvoice

4115: sort output of "links" in alphabetically order (Knocker)

2005/06/20: spiralvoice

4109: EDK: Improve update_server_list
4104: Check accessibility of used directories on core startup
4101: Telnet: Show BT hash in vd <num>
4099: Automatically insert version number in Windows ressource file
4093: Add Buildinfo button to HTML, Help+
4092: Add Razorback-Stats and Bitzi links to upstats
4091: EDK: Some progress on the cancel bug
4090: Overnet: Add stats to mem_stats and code cleanup
4089: gdstats: Update second graph correctly
4085: change download priority to keep started download rolling
4071: Code cleanup: Replace lprintf_newline with "\n"
---------------------------------------------------------------------
2005/06/06: spiralvoice (version 2.5.30.16 = tag release-2-5-30-16)

4070: Exit core on startup if a port is already used
4079: mlnet server id fix

2005/06/03: spiralvoice

4067: BT: Fix multifile commit
      (updated to create dirs with rights 777)
4063: HTML: Some improvements (beedauchon)

2005/05/30: spiralvoice

3984: Make filename_conversions option implementation safe
4042: Avoid sharing temp dir
4046: Hotfix: Circumvent max_hard_download_rate/2 bug
4051: mailer:encode subject and include a time zone
4055: Allow canceling of ed2k downloads if G2 is enabled
4056: Close all files if core receives SIGHUP
4057: Hotfix: Close files if an upload slots gets free
4058: Remove donkey_devel code, it is outdated
4060: Extend core startup message
4061: Block system signals during core startup

2005/05/28: spiralvoice

4040: EDK: Do not truncate shared files
4043: Avoid locking shared files
4044: G2: Enable dllink support for servers and friends
4045: Remove command "-daemon", use 'mlnet > /dev/null 2>&1 &' instead
4050: Sync with Amorphous rev325

2005/05/19: spiralvoice

4033: Fix "make clean" on MinGW/Cygwin (updated 2005/05/28)
4034: HTML: sources command has HTML output now (from beedauchon)

Replaced docs/http-1.1.txt and docs/uri.txt with links
to the original files.

Remove big, dcgui, giFT, hwd, lopster and small from ./icons
GTK old- and newgui and GTK2 GUI compile without those dirs.

Only these sets are used:
./config/Makefile.in:  ICONS_CHOICE=icons/rsvg
./config/Makefile.in:    ICONS_CHOICE=icons/tux
./config/Makefile.in:    ICONS_CHOICE=icons/kde

2005/05/17: spiralvoice

3985: Create pid file
3991: Respect $MLDONKEY_DIR
3993: Enable signal handling on MinGW
3996: EDK: Support auxports
4017: Fix use_tags compile
4018: New EDK clients: Emule Plus + Hydranode
4023: Enhance buildinfo
4025: Enable sha1new on Solaris and Windows
4026: Remove all servers with "rem all" works now
4027: Fix jpg viewing with gdstats
4028: Remove gd generated files (cosmetic code update 2005/05/19)
4029: EDK: Print warning if enable_servers false

2005/05/13: spiralvoice

3979: Show CVS date in CURRENT_RELEASE
3971: Send sources availability
3977: html_mods: fix server listing when a net is disabled
3978: properly sort availability in the GTK2 GUI
* Patch from beedauchon adds html support to donkeys
  new_print_mod_stats if emule mods statistics are disabled.
* Patch from beedauchon adds html support to the command gstats.
* Patch from beedauchon adds html support to the command ov/kad_stats.
* Patch from beedauchon adds some fixes to the html output 
  of the networks command.
---------------------------------------------------------------------
2005/05/02: spiralvoice (version 2.5.30.15 = tag release-2-5-30-15)

This version shares the same code as Amorphous revision 304.

3963: Remove Audiogalaxy code
3964: Remove obsolete Cymes entries
3970: Print web_infos (from beedauchon)
3972: bug fixes for the GTK2 GUI
3973: Support for Overnet contact.dat (from beedauchon)
3974: HTML: RSS support (from beedauchon)
3975: EDK: Fix for sending shares to server
3976: Remove obsolete Ares code
---------------------------------------------------------------------
2005/05/01: spiralvoice

3956: Set utf-8 character encoding in notification mails
3952: Print glibc version in buildinfo
3969: Sync with Amorphous rev293 
from rev290:
* A little cleanup for debug output.
from rev293:
* Patch from beedauchon fixes transparency issues with
graphical stats.
---------------------------------------------------------------------

Split Changelog in two parts, all stuff older than 2.5.30.15 is now in docs/ChangeLog.old:

http://savannah.nongnu.org/cgi-bin/viewcvs/mldonkey/mldonkey/docs/ChangeLog.old?rev=HEAD&content-type=text/vnd.viewcvs-markup
